# ========== SERVER ==========
server.port=${SERVER_PORT:8980}
app.server.base-url=http://localhost:8980

# ========== DATABASE ==========
spring.datasource.url=${SPRING_DATASOURCE_URL}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver

# ========== JPA/HIBERNATE ==========
spring.jpa.hibernate.ddl-auto=${SPRING_JPA_HIBERNATE_DDL_AUTO:update}
spring.jpa.show-sql=${SPRING_JPA_SHOW_SQL:true}
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.open-in-view=false
spring.jpa.properties.hibernate.hbm2ddl.auto=update

# ========== REDIS ==========
spring.data.redis.host=${SPRING_DATA_REDIS_HOST}
spring.data.redis.port=${SPRING_DATA_REDIS_PORT:6379}
spring.data.redis.timeout=${SPRING_DATA_REDIS_TIMEOUT:2000ms}
spring.data.redis.lettuce.pool.max-active=8
spring.data.redis.lettuce.pool.max-wait=-1ms
spring.data.redis.lettuce.pool.max-idle=8
spring.data.redis.lettuce.pool.min-idle=0

# ========== JWT ==========
jwt.secret=${JWT_SECRET}
jwt.expiration=${JWT_EXPIRATION:86400000}

# ========== EMAIL ==========
spring.mail.host=${SPRING_MAIL_HOST:smtp.gmail.com}
spring.mail.port=${SPRING_MAIL_PORT:587}
spring.mail.username=${SPRING_MAIL_USERNAME}
spring.mail.password=${SPRING_MAIL_PASSWORD}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.debug=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.connectiontimeout=10000
spring.mail.properties.mail.smtp.timeout=10000
spring.mail.properties.mail.smtp.writetimeout=10000

# ========== APP CONFIG ==========
app.name=${APP_NAME:English Learning App}
app.frontend.url=${APP_FRONTEND_URL:http://localhost:5173}

# ========== AUDIO STORAGE ==========
app.audio.upload-dir=${APP_AUDIO_UPLOAD_DIR:./media/listening}
app.upload.dir=${APP_UPLOAD_DIR:uploads}
app.audio.max-file-size=${APP_AUDIO_MAX_FILE_SIZE:52428800}

# ========== FILE UPLOAD ==========
spring.servlet.multipart.max-file-size=50MB
spring.servlet.multipart.max-request-size=50MB

# ========== ACTUATOR ==========
management.endpoints.web.exposure.include=mappings,health,info,redis
management.endpoint.health.show-details=always

# ========== DEVTOOLS ==========
spring.devtools.restart.enabled=${SPRING_DEVTOOLS_RESTART_ENABLED:false}
spring.devtools.livereload.enabled=${SPRING_DEVTOOLS_LIVERELOAD_ENABLED:false}

# ========== LOGGING ==========
logging.level.com.thanhnb.englishlearning=${LOG_LEVEL_APP:INFO}
logging.level.org.springframework.security=${LOG_LEVEL_SECURITY:INFO}
logging.level.org.springframework.data.redis=${LOG_LEVEL_REDIS:INFO}
logging.level.org.springframework.mail=${LOG_LEVEL_MAIL:INFO}
logging.level.jakarta.mail=${LOG_LEVEL_JAKARTA_MAIL:INFO}
logging.level.root=${LOG_LEVEL_ROOT:INFO}
logging.level.org.hibernate.SQL=INFO
logging.level.org.hibernate.orm.jdbc.bind=INFO

# ========== UNVERIDIED USER CLEANUP ===============
cleanup.unverified-users.enabled=true
cleanup.unverified-user.hours=24
cleanup.unverified-users.cron=0 0 2 * * *

spring.jpa.properties.hibernate.enable_lazy_load_no_trans=false
spring.transaction.default-timeout=30

# ========== LEARNING CONFIG ==========
app.learning.submit-cooldown-seconds=3
app.learning.pass-threshold=80.0
app.learning.max-attempts=0
app.learning.enforce-time-limit=false

# ========== AI CONFIGURATION ==========
# Gemini API (for PDF parsing - multimodal support)
ai.gemini.api-key=${AI_GEMINI_API_KEY}
ai.gemini.model=gemini-2.5-flash
ai.gemini.version=v1beta
ai.gemini.max-tokens=32000
ai.gemini.temperature=0.3
ai.gemini.rate-limit=1500

# Groq API (for text generation - ultra fast)
ai.groq.api-key=${AI_GROQ_API_KEY}
ai.groq.model=llama-3.3-70b-versatile
ai.groq.max-tokens=32000
ai.groq.temperature=0.7
ai.groq.rate-limit=14400

# Provider Selection
ai.provider.pdf-parser=gemini
ai.provider.writing-assessment=groq
ai.provider.recommendation=groq
ai.provider.analysis=groq
ai.provider.fallback=gemini

spring.cache.type=caffeine
spring.cache.cache-names=recommendations
spring.cache.caffeine.spec=expireAfterWrite=6h,maximumSize=1000