# ========== SERVER ==========
server.port=${SERVER_PORT:8980}

# ========== DATABASE ==========
spring.datasource.url=${SPRING_DATASOURCE_URL}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver

# ========== JPA/HIBERNATE ==========
spring.jpa.hibernate.ddl-auto=${SPRING_JPA_HIBERNATE_DDL_AUTO:update}
spring.jpa.show-sql=${SPRING_JPA_SHOW_SQL:true}
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.open-in-view=false
spring.jpa.properties.hibernate.hbm2ddl.auto=update

# ========== REDIS ==========
spring.data.redis.host=${SPRING_DATA_REDIS_HOST}
spring.data.redis.port=${SPRING_DATA_REDIS_PORT:6379}
spring.data.redis.timeout=${SPRING_DATA_REDIS_TIMEOUT:2000ms}
spring.data.redis.lettuce.pool.max-active=8
spring.data.redis.lettuce.pool.max-wait=-1ms
spring.data.redis.lettuce.pool.max-idle=8
spring.data.redis.lettuce.pool.min-idle=0

# ========== JWT ==========
jwt.secret=${JWT_SECRET}
jwt.expiration=${JWT_EXPIRATION:86400000}

# ========== EMAIL ==========
spring.mail.host=${SPRING_MAIL_HOST:smtp.gmail.com}
spring.mail.port=${SPRING_MAIL_PORT:587}
spring.mail.username=${SPRING_MAIL_USERNAME}
spring.mail.password=${SPRING_MAIL_PASSWORD}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.debug=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.connectiontimeout=10000
spring.mail.properties.mail.smtp.timeout=10000
spring.mail.properties.mail.smtp.writetimeout=10000

# ========== APP CONFIG ==========
app.name=${APP_NAME:English Learning App}
app.frontend.url=${APP_FRONTEND_URL:http://localhost:5173}

# ========== AUDIO STORAGE ==========
app.audio.upload-dir=${APP_AUDIO_UPLOAD_DIR:./media/listening}
app.upload.dir=${APP_UPLOAD_DIR:uploads}
app.audio.max-file-size=${APP_AUDIO_MAX_FILE_SIZE:52428800}

# ========== FILE UPLOAD ==========
spring.servlet.multipart.max-file-size=50MB
spring.servlet.multipart.max-request-size=50MB

# ========== ACTUATOR ==========
management.endpoints.web.exposure.include=mappings,health,info,redis
management.endpoint.health.show-details=always

# ========== AI API ==========
ai.gemini.api-key=${AI_GEMINI_API_KEY}
ai.groq.api-key=${AI_GROQ_API_KEY}

# ========== DEVTOOLS ==========
spring.devtools.restart.enabled=${SPRING_DEVTOOLS_RESTART_ENABLED:false}
spring.devtools.livereload.enabled=${SPRING_DEVTOOLS_LIVERELOAD_ENABLED:false}

# ========== LOGGING ==========
logging.level.com.thanhnb.englishlearning=${LOG_LEVEL_APP:INFO}
logging.level.org.springframework.security=${LOG_LEVEL_SECURITY:INFO}
logging.level.org.springframework.data.redis=${LOG_LEVEL_REDIS:INFO}
logging.level.org.springframework.mail=${LOG_LEVEL_MAIL:INFO}
logging.level.jakarta.mail=${LOG_LEVEL_JAKARTA_MAIL:INFO}
logging.level.root=${LOG_LEVEL_ROOT:INFO}
logging.level.org.hibernate.orm.jdbc.bind=TRACE

# ========== UNVERIDIED USER CLEANUP ===============
# Bật/tắt cleanup job
cleanup.unverified-users.enabled=true

# Số giờ trước khi xóa tài khoản chưa verify
cleanup.unverified-user.hours=24

# Cron expression cho scheduled job
# Format: second minute hour day month weekday
# 0 0 2 * * * = Chạy mỗi ngày lúc 2:00 AM
cleanup.unverified-users.cron=0 0 2 * * *

# ========== MỘT SỐ CRON EXAMPLES ==========
# Mỗi 6 giờ:       0 0 */6 * * *
# Mỗi ngày 3:00:   0 0 3 * * *
# Mỗi giờ:         0 0 * * * *
# Mỗi 30 phút:     0 */30 * * * *

